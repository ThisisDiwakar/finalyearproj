# ğŸ¨ Pinata Setup - Visual Guide

## Step-by-Step with Screenshots

### Step 1: Get to Pinata API Keys Page

```
1. Open browser
2. Go to: https://app.pinata.cloud/
3. Login or Sign Up
4. Click your profile icon (top right corner)
5. Select "API Keys" from dropdown
```

**Or go directly to:**
```
https://app.pinata.cloud/developers/api-keys
```

---

### Step 2: Create New API Key

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Keys                          [+ New Key]  â”‚ â† Click this button
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  No API keys yet                                â”‚
â”‚  Create your first API key to get started       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Step 3: Configure Permissions

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Create API Key                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  Key Name:                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ BlueCarbon-Registry-Dev                   â”‚ â”‚ â† Enter name
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                 â”‚
â”‚  Permissions:                                   â”‚
â”‚  â˜ Admin                                        â”‚
â”‚  â˜‘ pinFileToIPFS        â† Check this           â”‚
â”‚  â˜‘ pinJSONToIPFS        â† Check this           â”‚
â”‚  â˜ unpin                                        â”‚
â”‚  â˜ pinByHash                                    â”‚
â”‚  â˜ userPinnedDataTotal                          â”‚
â”‚                                                 â”‚
â”‚              [Cancel]  [Generate Key]           â”‚ â† Click Generate
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Step 4: Copy Your Keys

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš ï¸  Save Your Keys Now!                        â”‚
â”‚  You won't be able to see them again            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  API Key:                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ a1b2c3d4e5f6g7h8i9j0                      â”‚ â”‚ â† Copy this
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      [Copy]     â”‚
â”‚                                                 â”‚
â”‚  API Secret:                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 1234567890abcdefghijklmnopqrstuvwxyz...   â”‚ â”‚ â† Copy this
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      [Copy]     â”‚
â”‚                                                 â”‚
â”‚                              [Done]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**âš ï¸ IMPORTANT**: Copy both keys before clicking "Done"!

---

### Step 5: Open Your Project

```
Your Project Folder:
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ .env          â† Open this file
â”‚   â”œâ”€â”€ .env.example
â”‚   â”œâ”€â”€ server.js
â”‚   â””â”€â”€ ...
â”œâ”€â”€ frontend/
â””â”€â”€ ...
```

**Open in your code editor:**
```
File: backend/.env
```

---

### Step 6: Paste Keys in .env File

**BEFORE (with placeholders):**
```env
# MongoDB Connection
MONGO_URI=mongodb://localhost:27017/blue-carbon-registry

# JWT Secret
JWT_SECRET=blue_carbon_dev_secret_key_2024_change_this_in_production

# Server Port
PORT=5000

# Pinata IPFS API Keys
PINATA_API_KEY=                    â† Empty
PINATA_SECRET_KEY=                 â† Empty

# Frontend URL
FRONTEND_URL=http://localhost:5173
```

**AFTER (with your keys):**
```env
# MongoDB Connection
MONGO_URI=mongodb://localhost:27017/blue-carbon-registry

# JWT Secret
JWT_SECRET=blue_carbon_dev_secret_key_2024_change_this_in_production

# Server Port
PORT=5000

# Pinata IPFS API Keys
PINATA_API_KEY=a1b2c3d4e5f6g7h8i9j0              â† Paste API Key here
PINATA_SECRET_KEY=1234567890abcdefghijklmnopqr... â† Paste Secret here

# Frontend URL
FRONTEND_URL=http://localhost:5173
```

**Rules:**
- âœ… No spaces before or after the `=`
- âœ… No quotes around the keys
- âœ… Paste the entire key
- âŒ Don't add extra lines
- âŒ Don't modify other variables

---

### Step 7: Save the File

```
Windows/Linux: Ctrl + S
Mac: Cmd + S
```

**Verify:**
- File saved indicator disappears
- No unsaved changes marker

---

### Step 8: Restart Backend Server

**In your terminal:**

```bash
# If server is running, stop it first
Press: Ctrl + C

# Navigate to backend folder
cd backend

# Start server again
npm start
```

**Wait for startup message:**
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ğŸŒŠ Blue Carbon Registry API Server             â•‘
â•‘  ğŸ“¡ Running on: http://localhost:5000           â•‘
â•‘  ğŸ“¦ MongoDB: Connected âœ…                        â•‘
â•‘  ğŸ”— IPFS: Pinata Connected  â† Look for this!    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

### Step 9: Run Test Script

**In terminal:**
```bash
# Make sure you're in backend folder
cd backend

# Run test
node test-ipfs-sync.js
```

**Expected output:**
```
ğŸ§ª Testing IPFS Sync Functionality

ğŸ“¦ Connecting to MongoDB...
âœ… MongoDB connected

ğŸ”‘ Checking Pinata configuration...
âœ… Pinata API keys configured          â† Should say "configured"

ğŸ“¸ Creating registry snapshot...
âœ… Registry snapshot created: QmXxxx...
âœ… Snapshot hash saved
âœ… Snapshot created successfully!

ğŸ“Š Snapshot Details:
   IPFS Hash: QmXxxx...
   IPFS URL: https://gateway.pinata.cloud/ipfs/QmXxxx...
   Timestamp: 2024-02-24T10:30:00.000Z
   Total Projects: 1
   Pending: 0
   In Review: 1
   Approved: 0
   Rejected: 0

ğŸ” Verifying saved snapshot...
âœ… Snapshot saved and retrieved successfully!
   File location: backend/data/latest-snapshot.json

ğŸ‰ All tests passed!                   â† Success!
```

---

### Step 10: Verify on Pinata Dashboard

**Go to:**
```
https://app.pinata.cloud/pinmanager
```

**You should see:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pin Manager                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Name                          CID           Size  Date â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  BlueCarbon-Registry-2024...   QmXxxx...    2KB   Now  â”‚ â† Your file!
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Common Mistakes to Avoid

### âŒ Wrong: Extra spaces
```env
PINATA_API_KEY= a1b2c3d4e5f6g7h8i9j0    â† Space after =
PINATA_SECRET_KEY=1234567890abcdef      â† Space before key
```

### âœ… Correct: No spaces
```env
PINATA_API_KEY=a1b2c3d4e5f6g7h8i9j0
PINATA_SECRET_KEY=1234567890abcdef
```

---

### âŒ Wrong: Quotes around keys
```env
PINATA_API_KEY="a1b2c3d4e5f6g7h8i9j0"
PINATA_SECRET_KEY='1234567890abcdef'
```

### âœ… Correct: No quotes
```env
PINATA_API_KEY=a1b2c3d4e5f6g7h8i9j0
PINATA_SECRET_KEY=1234567890abcdef
```

---

### âŒ Wrong: Incomplete key
```env
PINATA_API_KEY=a1b2c3d4e5f6g7h8i9j0
PINATA_SECRET_KEY=1234567890abcdef...    â† Missing rest of key
```

### âœ… Correct: Complete key
```env
PINATA_API_KEY=a1b2c3d4e5f6g7h8i9j0
PINATA_SECRET_KEY=1234567890abcdefghijklmnopqrstuvwxyz1234567890abcdefghijklmnopqr
```

---

### âŒ Wrong: Forgot to restart server
```
Server still running with old config
Shows: "Local Fallback"
```

### âœ… Correct: Restart server
```bash
Ctrl + C  (stop)
npm start (restart)
Shows: "Pinata Connected"
```

---

## Verification Checklist

After setup, verify these:

```
âœ… backend/.env file has both keys
âœ… No spaces or quotes around keys
âœ… File is saved
âœ… Backend server restarted
âœ… Startup shows "Pinata Connected"
âœ… Test script passes
âœ… Files appear in Pinata dashboard
âœ… IPFS gateway URLs work
```

---

## Quick Troubleshooting

### Problem: Still shows "Local Fallback"

**Check:**
1. Keys pasted correctly in `.env`?
2. File saved?
3. Server restarted?
4. No typos in variable names?

**Fix:**
```bash
# 1. Check .env file
cat backend/.env | grep PINATA

# 2. Should show your keys (not empty)
# 3. Restart server
cd backend
npm start
```

---

### Problem: "401 Unauthorized"

**Check:**
1. Keys copied completely?
2. No extra characters?
3. Keys from correct Pinata account?

**Fix:**
1. Go back to Pinata
2. Delete old key
3. Create new key
4. Copy carefully
5. Paste in `.env`
6. Restart server

---

### Problem: "403 Forbidden"

**Check:**
1. Key has pinFileToIPFS permission?
2. Key has pinJSONToIPFS permission?

**Fix:**
1. Go to Pinata API Keys
2. Check key permissions
3. If missing, create new key
4. Enable both permissions
5. Update `.env`
6. Restart server

---

## Success Indicators

### âœ… You're done when you see:

1. **Backend startup:**
   ```
   ğŸ”— IPFS: Pinata Connected
   ```

2. **Test script:**
   ```
   âœ… Pinata API keys configured
   ğŸ‰ All tests passed!
   ```

3. **Pinata dashboard:**
   ```
   Files uploaded and visible
   ```

4. **IPFS gateway:**
   ```
   https://gateway.pinata.cloud/ipfs/QmXxxx...
   JSON data loads successfully
   ```

---

## Need Help?

### Quick References:
- **5-min guide**: `PINATA_QUICK_START.md`
- **Detailed guide**: `PINATA_SETUP_GUIDE.md`
- **Checklist**: `PINATA_CHECKLIST.md`
- **Main README**: `README_PINATA.md`

### Support:
- **Pinata Docs**: https://docs.pinata.cloud/
- **Pinata Discord**: https://discord.gg/pinata
- **Project Issues**: Check backend console logs

---

**Last Updated**: February 24, 2026
**Version**: 1.0.0
